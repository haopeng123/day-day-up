### Nginx 学习笔记
 > nginx是一个高性能的 HTTP和反向代理服务器，也是一个 IMAP/POP3/SMTP 服务器 (都这样说，反正我只用过它的http和反向代理)
 常用的WEB服务器的工作模式

 Web服务器要为用户提供服务，必须以某种方式，工作在某个套接字上。一般Web服务器在处理用户请求是，一般有如下三种方式可选择：多进程方式、多线程方式、异步方式。

 **多进程方式**：为每个请求启动一个进程来处理。由于在操作系统中，生成进程、销毁进程、进程间切换都很消耗CPU和内存，当负载高是，性能会明显降低。

 优点： 稳定性！由于采用独立进程处理独立请求，而进程之间是独立的，单个进程问题不会影响其他进程，因此稳定性最好。
 缺点： 资源占用！当请求过大时，需要大量的进程处理请求，进程生成、切换开销很大，而且进程间资源是独立的，造成内存重复利用。

 **多线程方式**：一个进程中用多个线程处理用户请求。由于线程开销明显小于进程，而且部分资源还可以共享，因此效率较高。

 优点：开销较小！线程间部分数据是共享的，且线程生成与线程间的切换所需资源开销比进程间切换小得多。
 缺点：稳定性！线程切换过快可能造成线程抖动，且线程过多会造成服务器不稳定。

 **异步方式**：使用非阻塞方式处理请求，是三种方式中开销最小的。但异步方式虽然效率高，但要求也高，因为多任务之间的调度如果出现问题，就可能出现整体故障，因此使用异步工作的，一般是一些功能相对简单，但却符合服务器任务调度、且代码中没有影响调度的错误代码存在的程序。

 优点：性能最好！一个进程或线程处理多个请求，不需要额外开销，性能最好，资源占用最低。
 缺点：稳定性！某个进程或线程出错，可能导致大量请求无法处理，甚至导致整个服务宕机。

 https://www.lvtao.net/config/nginx-share.html
```
   server {
                 listen 80;
                 server_name ht.ilr1000.com;
                 access_log  off;
                 location / {
                        proxy_pass http://127.0.0.1:8080;
                        proxy_set_header   Host             $host;
                        proxy_set_header   X-Real-IP        $remote_addr;
                        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
                        client_max_body_size   100m;
                 }
     }
```